// Generated by CoffeeScript 2.5.1
// todo
// url: https://lichess.org/analysis/pgn/1.%20c3%20e5%202.%20f3%20Nc6%203.%20Qc2%20Nf6%204.%20Qd3%20d5%205.%20Qe3%20Bd6%206.%20Qf2%20e4%207.%20Kd1%20O-O%208.%20Qe1%20Re8%209.%20fxe4%20dxe4%2010.%20d3%20exd3%2011.%20exd3%20Rxe1+%2012.%20Kxe1%20Ng4%2013.%20Nf3%20Bf5%2014.%20h3%20Bg3+%2015.%20Kd2%20Nf2%2016.%20Rg1%20Bxd3%2017.%20Bxd3%20Qxd3+%2018.%20Ke1%20Qd1#36
var BOKSTAVERA, READBOTH, STRENGTH, f, init, initSpeaker, queue, say, speaker, speaking, stockfish, voices;

import {
  r4r,
  table,
  tr,
  td,
  input,
  form,
  div,
  br,
  span
} from '../js/utils.js';

BOKSTAVERA = true;

STRENGTH = 10;

READBOTH = true;

speaker = null;

voices = null;

queue = [];

speaking = 0;

window.speechSynthesis.onvoiceschanged = function() {
  return voices = window.speechSynthesis.getVoices();
};

initSpeaker = function() {
  var index;
  index = 5;
  speaker = new SpeechSynthesisUtterance();
  speaker.onend = (event) => {
    speaking--;
    if (queue.length > 0) {
      return say();
    }
  };
  speaker.voiceURI = "native";
  speaker.volume = 1;
  speaker.rate = 1.0;
  speaker.pitch = 0;
  speaker.text = '';
  speaker.lang = 'sv';
  if (voices && index <= voices.length - 1) {
    return speaker.voice = voices[index];
  }
};

say = function(m = "") {
  if (speaker === null) {
    return;
  }
  if (m !== "") {
    queue.push(m);
  }
  if (speaking === 0) {
    speaking++;
    speaker.text = queue.shift();
    return speechSynthesis.speak(speaker);
  }
};

initSpeaker();

stockfish = new Worker('stockfish.js');

init = () => {
  var board, cfg, game, lastMove, makeMove, onDragStart, onDrop, onSnapEnd, updateStatus;
  board = null;
  game = new Chess();
  // do not pick up pieces if the game is over
  // only pick up pieces for White
  onDragStart = (source, piece, position, orientation) => {
    if (game.in_checkmate() || game.in_draw() || piece.search(/^b/) !== -1) {
      return false;
    }
  };
  makeMove = () => {
    var FEN, possibleMoves;
    possibleMoves = game.moves();
    // game over
    if (possibleMoves.length === 0) {
      return;
    }
    FEN = game.fen();
    document.getElementById('fen').value = FEN;
    stockfish.postMessage("position fen" + " " + FEN);
    stockfish.postMessage('go depth ' + STRENGTH);
    return stockfish.onmessage = (event) => {
      var botmovesource, botmovetarget, meldung, move, res, source, str, target, zug;
      //console.log event.data
      document.getElementById("bestmove").innerHTML = event.data;
      str = event.data;
      res = str.match(/score/g);
      if (res === "score") {
        meldung = str.split(" ");
        document.getElementById("sc").innerHTML = meldung[9];
      }
      res = str.split(" ");
      if (res[0] === "bestmove") {
        zug = res[1].split("");
        botmovesource = zug[0] + zug[1];
        botmovetarget = zug[2] + zug[3];
        // document.getElementById("botmove").innerHTML = botmovesource;
        source = botmovesource;
        target = botmovetarget;
        move = game.move({
          from: source,
          to: target,
          promotion: 'q'
        });
        say(lastMove());
        board.position(game.fen());
        document.getElementById("PGN").innerHTML = game.pgn();
        return updateStatus();
      }
    };
  };
  //sound()
  lastMove = () => {
    var move, moves, oldmove;
    moves = game.history();
    if (moves.length === 0) {
      return '';
    }
    move = moves[moves.length - 1];
    oldmove = move;
    move = move.replaceAll("a", "!"); // annars byts f ut mot filip
    move = move.replaceAll("b", "@");
    move = move.replaceAll("c", "_");
    move = move.replaceAll("d", "$");
    move = move.replaceAll("e", "%");
    move = move.replaceAll("f", "^");
    move = move.replaceAll("g", "&");
    move = move.replaceAll("h", "*");
    move = move.replace("x", "X");
    move = move.replaceAll("!", "alfa ");
    move = move.replaceAll("@", "bravo ");
    move = move.replaceAll("_", "charlie ");
    move = move.replaceAll("$", "dällta ");
    move = move.replaceAll("%", "eko ");
    move = move.replaceAll("^", "filip ");
    move = move.replaceAll("&", "golf ");
    move = move.replaceAll("*", "hotel ");
    move = move.replace("X", " slår ");
    move = move.replace("N", "springare ");
    move = move.replace("B", "löpare ");
    move = move.replace("R", "torn ");
    move = move.replace("Q", "dam ");
    move = move.replace("K", "kung ");
    move = move.replace("+", ", schack");
    move = move.replace("#", ", schack matt");
    move = move.replace('O-O-O', 'kung lång');
    move = move.replace('O-O', 'kung kort');
    console.log(oldmove, '->', move);
    return move;
  };
  onDrop = (source, target) => {
    var move;
    move = game.move({
      from: source,
      to: target,
      promotion: 'q'
    });
    if (move === null) {
      return 'snapback';
    }
    if (READBOTH) {
      say(lastMove());
    }
    return window.setTimeout(makeMove, 150);
  };
  // update the board position after the piece snap
  // for castling, en passant, pawn promotion
  onSnapEnd = () => {
    board.position(game.fen());
    document.getElementById("PGN").innerHTML = game.pgn();
    return updateStatus();
  };
  //sound()
  updateStatus = () => {
    var moveColor, status;
    status = '';
    moveColor = game.turn() === 'b' ? 'Black' : 'White';
    if (game.in_checkmate()) {
      status = 'Game over, ' + moveColor + ' is in checkmate.';
    } else if (game.in_draw()) {
      status = 'Game over, drawn position';
    } else {
      status = moveColor + ' to move';
      if (game.in_check()) {
        status += ', ' + moveColor + ' is in check';
      }
    }
    return document.getElementById("status").innerHTML = status;
  };
  cfg = {
    draggable: true,
    position: 'start',
    onDragStart,
    onDrop,
    onSnapEnd
  };
  return board = ChessBoard('board', cfg);
};

// sound = =>
// 	document.getElementById('sound').innerHTML = '<audio autoplay preload controls> <source src="sound/move.wav" type="audio/wav" /> </audio>'
f = (a, b = "") => {
  if (b === "") {
    b = a.toUpperCase();
  }
  return tr({}, td({}, b + ":"), td({
    id: a
  }));
};

r4r(() => {
  return table({}, tr({}, td({}, div({
    id: "board",
    style: "width: 400px"
  }), input({
    size: "50",
    id: "fen",
    style: "color: #de5410;font-size: 12px; ",
    type: "text"
  }, form({
    action: ""
  }, input({
    type: "submit",
    value: "New Game"
  // td {valign:top},
  //			table {},
  }))))), tr({}, f("PGN"), f("status"), f("bestmove"), f("sc", "SCORE")));
});

$(document).ready(init);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXJiYW4uanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcdXJiYW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDd1c7O0FBQUEsSUFBQSxVQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxLQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsU0FBQSxFQUFBOztBQUV4VyxPQUFBO0VBQVEsR0FBUjtFQUFZLEtBQVo7RUFBa0IsRUFBbEI7RUFBcUIsRUFBckI7RUFBd0IsS0FBeEI7RUFBOEIsSUFBOUI7RUFBbUMsR0FBbkM7RUFBdUMsRUFBdkM7RUFBMEMsSUFBMUM7Q0FBQSxNQUFBOztBQUVBLFVBQUEsR0FBYTs7QUFDYixRQUFBLEdBQVc7O0FBRVgsUUFBQSxHQUFTOztBQUVULE9BQUEsR0FBVTs7QUFDVixNQUFBLEdBQVM7O0FBQ1QsS0FBQSxHQUFROztBQUNSLFFBQUEsR0FBVzs7QUFFWCxNQUFNLENBQUMsZUFBZSxDQUFDLGVBQXZCLEdBQXlDLFFBQUEsQ0FBQSxDQUFBO1NBQUcsTUFBQSxHQUFTLE1BQU0sQ0FBQyxlQUFlLENBQUMsU0FBdkIsQ0FBQTtBQUFaOztBQUV6QyxXQUFBLEdBQWMsUUFBQSxDQUFBLENBQUE7QUFDZCxNQUFBO0VBQUMsS0FBQSxHQUFRO0VBQ1IsT0FBQSxHQUFVLElBQUksd0JBQUosQ0FBQTtFQUNWLE9BQU8sQ0FBQyxLQUFSLEdBQWdCLENBQUMsS0FBRCxDQUFBLEdBQUE7SUFDZixRQUFBO0lBQ0EsSUFBRyxLQUFLLENBQUMsTUFBTixHQUFlLENBQWxCO2FBQXlCLEdBQUEsQ0FBQSxFQUF6Qjs7RUFGZTtFQUdoQixPQUFPLENBQUMsUUFBUixHQUFtQjtFQUNuQixPQUFPLENBQUMsTUFBUixHQUFpQjtFQUNqQixPQUFPLENBQUMsSUFBUixHQUFlO0VBQ2YsT0FBTyxDQUFDLEtBQVIsR0FBZ0I7RUFDaEIsT0FB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LEtBQUEsRUFBTTtFQUFsQixDQUFKLENBREQsRUFFQyxLQUFBLENBQU07SUFBQyxJQUFBLEVBQUssSUFBTjtJQUFZLEVBQUEsRUFBRyxLQUFmO0lBQXNCLEtBQUEsRUFBTSxrQ0FBNUI7SUFBZ0UsSUFBQSxFQUFLO0VBQXJFLENBQU4sRUFDQyxJQUFBLENBQUs7SUFBQyxNQUFBLEVBQU87RUFBUixDQUFMLEVBQ0MsS0FBQSxDQUFNO0lBQUMsSUFBQSxFQUFLLFFBQU47SUFBZ0IsS0FBQSxFQUFNLFVBQXRCOzs7RUFBQSxDQUFOLENBREQsQ0FERCxDQUZELENBREQsQ0FERCxFQU9DLEVBQUEsQ0FBRyxDQUFBLENBQUgsRUFHQyxDQUFBLENBQUUsS0FBRixDQUhELEVBSUMsQ0FBQSxDQUFFLFFBQUYsQ0FKRCxFQUtDLENBQUEsQ0FBRSxVQUFGLENBTEQsRUFNQyxDQUFBLENBQUUsSUFBRixFQUFPLE9BQVAsQ0FORCxDQVBEO0FBREcsQ0FBSjs7QUFnQkEsQ0FBQSxDQUFFLFFBQUYsQ0FBVyxDQUFDLEtBQVosQ0FBa0IsSUFBbEIiLCJzb3VyY2VzQ29udGVudCI6WyIjIHRvZG9cclxuIyB1cmw6IGh0dHBzOi8vbGljaGVzcy5vcmcvYW5hbHlzaXMvcGduLzEuJTIwYzMlMjBlNSUyMDIuJTIwZjMlMjBOYzYlMjAzLiUyMFFjMiUyME5mNiUyMDQuJTIwUWQzJTIwZDUlMjA1LiUyMFFlMyUyMEJkNiUyMDYuJTIwUWYyJTIwZTQlMjA3LiUyMEtkMSUyME8tTyUyMDguJTIwUWUxJTIwUmU4JTIwOS4lMjBmeGU0JTIwZHhlNCUyMDEwLiUyMGQzJTIwZXhkMyUyMDExLiUyMGV4ZDMlMjBSeGUxKyUyMDEyLiUyMEt4ZTElMjBOZzQlMjAxMy4lMjBOZjMlMjBCZjUlMjAxNC4lMjBoMyUyMEJnMyslMjAxNS4lMjBLZDIlMjBOZjIlMjAxNi4lMjBSZzElMjBCeGQzJTIwMTcuJTIwQnhkMyUyMFF4ZDMrJTIwMTguJTIwS2UxJTIwUWQxIzM2XHJcblxyXG5pbXBvcnQge3I0cix0YWJsZSx0cix0ZCxpbnB1dCxmb3JtLGRpdixicixzcGFufSBmcm9tICcuLi9qcy91dGlscy5qcydcclxuXHJcbkJPS1NUQVZFUkEgPSB0cnVlXHJcblNUUkVOR1RIID0gMTBcclxuXHJcblJFQURCT1RIPXRydWVcclxuXHJcbnNwZWFrZXIgPSBudWxsXHJcbnZvaWNlcyA9IG51bGxcclxucXVldWUgPSBbXVxyXG5zcGVha2luZyA9IDBcclxuXHJcbndpbmRvdy5zcGVlY2hTeW50aGVzaXMub252b2ljZXNjaGFuZ2VkID0gLT4gdm9pY2VzID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKVxyXG5cclxuaW5pdFNwZWFrZXIgPSAtPlxyXG5cdGluZGV4ID0gNVxyXG5cdHNwZWFrZXIgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKClcclxuXHRzcGVha2VyLm9uZW5kID0gKGV2ZW50KSA9PiBcclxuXHRcdHNwZWFraW5nLS1cclxuXHRcdGlmIHF1ZXVlLmxlbmd0aCA+IDAgdGhlbiBzYXkoKVxyXG5cdHNwZWFrZXIudm9pY2VVUkkgPSBcIm5hdGl2ZVwiXHJcblx0c3BlYWtlci52b2x1bWUgPSAxXHJcblx0c3BlYWtlci5yYXRlID0gMS4wXHJcblx0c3BlYWtlci5waXRjaCA9IDBcclxuXHRzcGVha2VyLnRleHQgPSAnJyBcclxuXHRzcGVha2VyLmxhbmcgPSAnc3YnXHJcblx0aWYgdm9pY2VzIGFuZCBpbmRleCA8PSB2b2ljZXMubGVuZ3RoLTEgdGhlbiBzcGVha2VyLnZvaWNlID0gdm9pY2VzW2luZGV4XVxyXG5cclxuc2F5ID0gKG09XCJcIikgLT5cclxuXHRpZiBzcGVha2VyID09IG51bGwgdGhlbiByZXR1cm5cclxuXHRpZiBtICE9IFwiXCIgdGhlbiBxdWV1ZS5wdXNoIG1cclxuXHRpZiBzcGVha2luZyA9PSAwXHJcblx0XHRzcGVha2luZysrXHJcblx0XHRzcGVha2VyLnRleHQgPSBxdWV1ZS5zaGlmdCgpXHJcblx0XHRzcGVlY2hTeW50aGVzaXMuc3BlYWsgc3BlYWtlclxyXG5cclxuaW5pdFNwZWFrZXIoKVxyXG5zdG9ja2Zpc2ggPSBuZXcgV29ya2VyICdzdG9ja2Zpc2guanMnXHJcblxyXG5pbml0ID0gPT5cclxuXHRib2FyZCA9IG51bGxcclxuXHRnYW1lID0gbmV3IENoZXNzKClcclxuXHJcblx0IyBkbyBub3QgcGljayB1cCBwaWVjZXMgaWYgdGhlIGdhbWUgaXMgb3ZlclxyXG5cdCMgb25seSBwaWNrIHVwIHBpZWNlcyBmb3IgV2hpdGVcclxuXHRvbkRyYWdTdGFydCA9IChzb3VyY2UsIHBpZWNlLCBwb3NpdGlvbiwgb3JpZW50YXRpb24pID0+XHJcblx0XHRpZiBnYW1lLmluX2NoZWNrbWF0ZSgpIHx8IGdhbWUuaW5fZHJhdygpIHx8IHBpZWNlLnNlYXJjaCgvXmIvKSAhPSAtMVxyXG5cdFx0XHRyZXR1cm4gZmFsc2VcclxuXHJcblx0bWFrZU1vdmUgPSA9PlxyXG5cdFx0cG9zc2libGVNb3ZlcyA9IGdhbWUubW92ZXMoKVxyXG5cclxuXHRcdCMgZ2FtZSBvdmVyXHJcblx0XHRpZiBwb3NzaWJsZU1vdmVzLmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuXHJcblxyXG5cdFx0RkVOID0gZ2FtZS5mZW4oKVxyXG5cclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmZW4nKS52YWx1ZSA9IEZFTlxyXG5cclxuXHRcdHN0b2NrZmlzaC5wb3N0TWVzc2FnZSBcInBvc2l0aW9uIGZlblwiK1wiIFwiK0ZFTlxyXG5cdFx0c3RvY2tmaXNoLnBvc3RNZXNzYWdlICdnbyBkZXB0aCAnICsgU1RSRU5HVEhcclxuXHJcblx0XHRzdG9ja2Zpc2gub25tZXNzYWdlID0gKGV2ZW50KSA9PlxyXG5cdFx0XHQjY29uc29sZS5sb2cgZXZlbnQuZGF0YVxyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJlc3Rtb3ZlXCIpLmlubmVySFRNTCA9IGV2ZW50LmRhdGFcclxuXHRcdFx0c3RyID0gZXZlbnQuZGF0YVxyXG5cdFx0XHRyZXMgPSBzdHIubWF0Y2ggL3Njb3JlL2dcclxuXHRcdFx0XHRcclxuXHRcdFx0aWYgcmVzID09IFwic2NvcmVcIlxyXG5cdFx0XHRcdG1lbGR1bmcgPSBzdHIuc3BsaXQgXCIgXCJcclxuXHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjXCIpLmlubmVySFRNTCA9IG1lbGR1bmdbOV1cclxuXHRcdFx0XHJcblx0XHRcdHJlcyA9IHN0ci5zcGxpdCBcIiBcIlxyXG5cdFx0XHRcclxuXHRcdFx0aWYgcmVzWzBdID09IFwiYmVzdG1vdmVcIlxyXG5cdFx0XHRcdHp1ZyA9IHJlc1sxXS5zcGxpdCBcIlwiXHJcblx0XHRcdFx0Ym90bW92ZXNvdXJjZSA9IHp1Z1swXSt6dWdbMV1cclxuXHRcdFx0XHRib3Rtb3ZldGFyZ2V0ID0genVnWzJdK3p1Z1szXVxyXG5cdFx0XHRcdCMgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib3Rtb3ZlXCIpLmlubmVySFRNTCA9IGJvdG1vdmVzb3VyY2U7XHJcblx0XHRcdFx0c291cmNlID0gYm90bW92ZXNvdXJjZVxyXG5cdFx0XHRcdHRhcmdldCA9IGJvdG1vdmV0YXJnZXRcclxuXHRcdFx0XHRtb3ZlID0gZ2FtZS5tb3ZlIHtmcm9tOiBzb3VyY2UsIHRvOiB0YXJnZXQscHJvbW90aW9uOiAncSd9XHJcblxyXG5cdFx0XHRcdHNheSBsYXN0TW92ZSgpXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ym9hcmQucG9zaXRpb24gZ2FtZS5mZW4oKVxyXG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiUEdOXCIpLmlubmVySFRNTCA9IGdhbWUucGduKClcclxuXHRcdFx0XHR1cGRhdGVTdGF0dXMoKVxyXG5cdFx0XHRcdCNzb3VuZCgpXHJcblxyXG5cdGxhc3RNb3ZlID0gPT5cclxuXHRcdG1vdmVzID0gZ2FtZS5oaXN0b3J5KClcclxuXHRcdGlmIG1vdmVzLmxlbmd0aCA9PSAwIHRoZW4gcmV0dXJuICcnXHJcblx0XHRtb3ZlID0gbW92ZXNbbW92ZXMubGVuZ3RoLTFdXHJcblx0XHRvbGRtb3ZlID0gbW92ZVxyXG5cclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCJhXCIsIFwiIVwiICMgYW5uYXJzIGJ5dHMgZiB1dCBtb3QgZmlsaXBcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCJiXCIsIFwiQFwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiY1wiLCBcIl9cIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcImRcIiwgXCIkXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCJlXCIsIFwiJVwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiZlwiLCBcIl5cIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcImdcIiwgXCImXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCJoXCIsIFwiKlwiXHJcblxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSBcInhcIixcIlhcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIiFcIixcImFsZmEgXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCJAXCIsXCJicmF2byBcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIl9cIixcImNoYXJsaWUgXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCIkXCIsXCJkw6RsbHRhIFwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiJVwiLFwiZWtvIFwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiXlwiLFwiZmlsaXAgXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCImXCIsXCJnb2xmIFwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiKlwiLFwiaG90ZWwgXCJcclxuXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlIFwiWFwiLCBcIiBzbMOlciBcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSBcIk5cIiwgXCJzcHJpbmdhcmUgXCJcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2UgXCJCXCIsIFwibMO2cGFyZSBcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSBcIlJcIiwgXCJ0b3JuIFwiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlIFwiUVwiLCBcImRhbSBcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSBcIktcIiwgXCJrdW5nIFwiXHJcblxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSBcIitcIiwgXCIsIHNjaGFja1wiXHJcblx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlIFwiI1wiLCBcIiwgc2NoYWNrIG1hdHRcIlxyXG5cdFx0bW92ZSA9IG1vdmUucmVwbGFjZSAnTy1PLU8nLCAna3VuZyBsw6VuZydcclxuXHRcdG1vdmUgPSBtb3ZlLnJlcGxhY2UgJ08tTycsICdrdW5nIGtvcnQnXHJcblx0XHRjb25zb2xlLmxvZyBvbGRtb3ZlLCctPicsbW92ZVxyXG5cdFx0bW92ZVxyXG5cclxuXHRvbkRyb3AgPSAoc291cmNlLCB0YXJnZXQpID0+XHJcblx0XHRtb3ZlID0gZ2FtZS5tb3ZlIHsgZnJvbTpzb3VyY2UsIHRvOnRhcmdldCwgcHJvbW90aW9uOidxJyB9XHJcblx0XHRpZiBtb3ZlID09IG51bGwgdGhlbiByZXR1cm4gJ3NuYXBiYWNrJ1xyXG5cdFx0aWYgUkVBREJPVEggdGhlbiBzYXkgbGFzdE1vdmUoKVxyXG5cdFx0d2luZG93LnNldFRpbWVvdXQgbWFrZU1vdmUsIDE1MFxyXG5cclxuXHQjIHVwZGF0ZSB0aGUgYm9hcmQgcG9zaXRpb24gYWZ0ZXIgdGhlIHBpZWNlIHNuYXBcclxuXHQjIGZvciBjYXN0bGluZywgZW4gcGFzc2FudCwgcGF3biBwcm9tb3Rpb25cclxuXHRvblNuYXBFbmQgPSA9PlxyXG5cdFx0Ym9hcmQucG9zaXRpb24gZ2FtZS5mZW4oKVxyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJQR05cIikuaW5uZXJIVE1MID0gZ2FtZS5wZ24oKVxyXG5cdFx0dXBkYXRlU3RhdHVzKClcclxuXHRcdCNzb3VuZCgpXHJcblxyXG5cdHVwZGF0ZVN0YXR1cyA9ID0+XHJcblx0XHRzdGF0dXMgPSAnJ1xyXG5cdFx0bW92ZUNvbG9yID0gaWYgZ2FtZS50dXJuKCkgPT0gJ2InIHRoZW4gJ0JsYWNrJyBlbHNlICdXaGl0ZSdcclxuXHRcdGlmIGdhbWUuaW5fY2hlY2ttYXRlKCkgdGhlbiBzdGF0dXMgPSAnR2FtZSBvdmVyLCAnICsgbW92ZUNvbG9yICsgJyBpcyBpbiBjaGVja21hdGUuJ1xyXG5cdFx0ZWxzZSBpZiBnYW1lLmluX2RyYXcoKSB0aGVuIHN0YXR1cyA9ICdHYW1lIG92ZXIsIGRyYXduIHBvc2l0aW9uJ1xyXG5cdFx0ZWxzZSBcclxuXHRcdFx0c3RhdHVzID0gbW92ZUNvbG9yICsgJyB0byBtb3ZlJ1xyXG5cdFx0XHRpZiBnYW1lLmluX2NoZWNrKCkgdGhlbiBzdGF0dXMgKz0gJywgJyArIG1vdmVDb2xvciArICcgaXMgaW4gY2hlY2snXHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKS5pbm5lckhUTUwgPSBzdGF0dXNcclxuXHJcblx0Y2ZnID0ge2RyYWdnYWJsZTp0cnVlLCBwb3NpdGlvbjonc3RhcnQnLCBvbkRyYWdTdGFydCxvbkRyb3Asb25TbmFwRW5kfVxyXG5cdGJvYXJkID0gQ2hlc3NCb2FyZCAnYm9hcmQnLCBjZmdcclxuXHJcbiMgc291bmQgPSA9PlxyXG4jIFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NvdW5kJykuaW5uZXJIVE1MID0gJzxhdWRpbyBhdXRvcGxheSBwcmVsb2FkIGNvbnRyb2xzPiA8c291cmNlIHNyYz1cInNvdW5kL21vdmUud2F2XCIgdHlwZT1cImF1ZGlvL3dhdlwiIC8+IDwvYXVkaW8+J1xyXG5cclxuZiA9IChhLGI9XCJcIikgPT5cclxuXHRpZiBiPT1cIlwiIHRoZW4gYiA9IGEudG9VcHBlckNhc2UoKVxyXG5cdHRyIHt9LFxyXG5cdFx0dGQge30sYitcIjpcIlxyXG5cdFx0dGQge2lkOmF9XHJcblxyXG5yNHIgPT5cclxuXHR0YWJsZSB7fSxcclxuXHRcdHRyIHt9LFxyXG5cdFx0XHR0ZCB7fSxcclxuXHRcdFx0XHRkaXYge2lkOlwiYm9hcmRcIixzdHlsZTpcIndpZHRoOiA0MDBweFwifVxyXG5cdFx0XHRcdGlucHV0IHtzaXplOlwiNTBcIiwgaWQ6XCJmZW5cIiwgc3R5bGU6XCJjb2xvcjogI2RlNTQxMDtmb250LXNpemU6IDEycHg7IFwiLCB0eXBlOlwidGV4dFwifSxcclxuXHRcdFx0XHRcdGZvcm0ge2FjdGlvbjpcIlwifSxcclxuXHRcdFx0XHRcdFx0aW5wdXQge3R5cGU6XCJzdWJtaXRcIiwgdmFsdWU6XCJOZXcgR2FtZVwifVxyXG5cdFx0dHIge30sXHJcblx0XHRcdCMgdGQge3ZhbGlnbjp0b3B9LFxyXG4jXHRcdFx0dGFibGUge30sXHJcblx0XHRcdGYgXCJQR05cIlxyXG5cdFx0XHRmIFwic3RhdHVzXCJcclxuXHRcdFx0ZiBcImJlc3Rtb3ZlXCJcclxuXHRcdFx0ZiBcInNjXCIsXCJTQ09SRVwiXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeSBpbml0XHJcbiJdfQ==
//# sourceURL=c:\github\Interface-for-stockfishjs\coffee\urban.coffee