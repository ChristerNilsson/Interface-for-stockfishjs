// Generated by CoffeeScript 2.5.1
// todo
// url: https://lichess.org/analysis/pgn/1.%20c3%20e5%202.%20f3%20Nc6%203.%20Qc2%20Nf6%204.%20Qd3%20d5%205.%20Qe3%20Bd6%206.%20Qf2%20e4%207.%20Kd1%20O-O%208.%20Qe1%20Re8%209.%20fxe4%20dxe4%2010.%20d3%20exd3%2011.%20exd3%20Rxe1+%2012.%20Kxe1%20Ng4%2013.%20Nf3%20Bf5%2014.%20h3%20Bg3+%2015.%20Kd2%20Nf2%2016.%20Rg1%20Bxd3%2017.%20Bxd3%20Qxd3+%2018.%20Ke1%20Qd1#36
var BOKSTAVERA, READBOTH, STRENGTH, analyze, configure, f, game, init, initSpeaker, newGame, query, queue, say, speaker, speaking, stockfish, voices;

import {
  log,
  r4r,
  table,
  tr,
  td,
  input,
  form,
  div,
  br,
  span,
  button
} from '../js/utils.js';

query = {};

configure = () => {
  var queryString, urlParams;
  queryString = window.location.search;
  urlParams = new URLSearchParams(queryString);
  query.fen = urlParams.get("fen");
  if (!query.fen) {
    query.fen = "rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";
  }
  // query.fen = "8/8/8/4k3/3R4/2K5/8/8 w - - 0 1"
  return query;
};

console.log(configure());

BOKSTAVERA = true;

STRENGTH = 10;

READBOTH = true;

stockfish = null;

speaker = null;

voices = null;

queue = [];

speaking = 0;

game = null;

window.speechSynthesis.onvoiceschanged = function() {
  return voices = window.speechSynthesis.getVoices();
};

initSpeaker = function() {
  var index;
  index = 5;
  speaker = new SpeechSynthesisUtterance();
  speaker.onend = (event) => {
    speaking--;
    if (queue.length > 0) {
      return say();
    }
  };
  speaker.voiceURI = "native";
  speaker.volume = 1;
  speaker.rate = 1.0;
  speaker.pitch = 0;
  speaker.text = '';
  speaker.lang = 'sv';
  if (voices && index <= voices.length - 1) {
    return speaker.voice = voices[index];
  }
};

say = function(m = "") {
  if (speaker === null) {
    return;
  }
  if (m !== "") {
    queue.push(m);
  }
  if (speaking === 0) {
    speaking++;
    speaker.text = queue.shift();
    return speechSynthesis.speak(speaker);
  }
};

initSpeaker();

init = () => {
  var board, cfg, lastMove, makeMove, onDragStart, onDrop, onSnapEnd, patch, updateStatus;
  stockfish = new Worker('stockfish.js');
  board = null;
  game = new Chess(query.fen);
  // log game
  // stockfish.postMessage "position fen " + query.fen

  // do not pick up pieces if the game is over
  // only pick up pieces for White
  onDragStart = (source, piece, position, orientation) => {
    if (game.in_checkmate() || game.in_draw() || piece.search(/^b/) !== -1) {
      return false;
    }
  };
  makeMove = () => {
    var FEN, possibleMoves;
    possibleMoves = game.moves();
    // game over
    if (possibleMoves.length === 0) {
      return;
    }
    FEN = game.fen();
    stockfish.postMessage("position fen " + FEN);
    //stockfish.postMessage 'go depth ' + STRENGTH
    stockfish.postMessage('go movetime 1000'); // ms
    return stockfish.onmessage = (event) => {
      var botmovesource, botmovetarget, message, move, score, source, str, target, zug;
      console.log(event.data);
      document.getElementById("bestmove").innerHTML = event.data;
      str = event.data;
      message = str.split(" ");
      if (message.includes("score")) {
        if (message[8] === 'cp') {
          score = -message[9] / 100;
        }
        if (message[8] === 'mate') {
          score = '#' + message[9];
        }
        document.getElementById("score").innerHTML = score;
      }
      
      // res = str.split " "
      if (message[0] === "bestmove") {
        zug = message[1].split("");
        botmovesource = zug[0] + zug[1];
        botmovetarget = zug[2] + zug[3];
        // document.getElementById("botmove").innerHTML = botmovesource;
        source = botmovesource;
        target = botmovetarget;
        move = game.move({
          from: source,
          to: target,
          promotion: 'q'
        });
        say(lastMove());
        board.position(game.fen());
        document.getElementById("PGN").innerHTML = game.pgn();
        return updateStatus();
      }
    };
  };
  //sound()
  patch = function(move, obj) {
    var key, value;
    for (key in obj) {
      value = obj[key];
      move = move.replace(key, value);
    }
    return move;
  };
  lastMove = () => {
    var move, moves, oldmove;
    moves = game.history();
    if (moves.length === 0) {
      return '';
    }
    move = moves[moves.length - 1];
    oldmove = move;
    move = patch(move, {
      a: "!",
      b: "@",
      c: "_",
      d: "$",
      e: "%",
      f: "^",
      g: "&",
      h: "*"
    });
    move = patch(move, {
      "!": "adam ",
      "@": "bertil ",
      "_": "seehsar ",
      "$": "david ",
      "%": "erik ",
      "^": "filip ",
      "&": "gustav ",
      "*": "helge "
    });
    move = patch(move, {
      x: " slår ",
      N: "springare ",
      B: "löpare ",
      R: "torn ",
      Q: "dam ",
      K: "kung ",
      "+": ", schack",
      "#": ", schack matt",
      'O-O-O': 'kung lång',
      'O-O': 'kung kort'
    });
    // move = move.replaceAll "a", "!"
    // move = move.replaceAll "b", "@"
    // move = move.replaceAll "c", "_"
    // move = move.replaceAll "d", "$"
    // move = move.replaceAll "e", "%"
    // move = move.replaceAll "f", "^"
    // move = move.replaceAll "g", "&"
    // move = move.replaceAll "h", "*"

    // move = move.replaceAll "!","adam "
    // move = move.replaceAll "@","bertil "
    // move = move.replaceAll "_","seehsar "
    // move = move.replaceAll "$","david "
    // move = move.replaceAll "%","erik "
    // move = move.replaceAll "^","filip "
    // move = move.replaceAll "&","gustav "
    // move = move.replaceAll "*","helge "

    // move = move.replace "x", " slår "
    // move = move.replace "N", "springare "
    // move = move.replace "B", "löpare "
    // move = move.replace "R", "torn "
    // move = move.replace "Q", "dam "
    // move = move.replace "K", "kung "
    // move = move.replace "+", ", schack"
    // move = move.replace "#", ", schack matt"
    // move = move.replace 'O-O-O', 'kung lång'
    // move = move.replace 'O-O', 'kung kort'
    console.log(oldmove, '->', move);
    return move;
  };
  onDrop = (source, target) => {
    var move;
    move = game.move({
      from: source,
      to: target,
      promotion: 'q'
    });
    if (move === null) {
      return 'snapback';
    }
    if (READBOTH) {
      say(lastMove());
    }
    return window.setTimeout(makeMove, 150);
  };
  // update the board position after the piece snap
  // for castling, en passant, pawn promotion
  onSnapEnd = () => {
    board.position(game.fen());
    document.getElementById("PGN").innerHTML = game.pgn();
    return updateStatus();
  };
  //sound()
  updateStatus = () => {
    var moveColor, status;
    status = '';
    moveColor = game.turn() === 'b' ? 'Black' : 'White';
    if (game.in_checkmate()) {
      status = 'Game over, ' + moveColor + ' is in checkmate.';
    } else if (game.in_draw()) {
      status = 'Game over, drawn position';
    } else {
      status = moveColor + ' to move';
      if (game.in_check()) {
        status += ', ' + moveColor + ' is in check';
      }
    }
    return document.getElementById("status").innerHTML = status;
  };
  cfg = {
    draggable: true,
    position: query.fen,
    onDragStart,
    onDrop,
    onSnapEnd
  };
  console.log(game.fen());
  return board = ChessBoard('board', cfg);
};

// sound = =>
// 	document.getElementById('sound').innerHTML = '<audio autoplay preload controls> <source src="sound/move.wav" type="audio/wav" /> </audio>'
f = (a, b = "") => {
  if (b === "") {
    b = a.toUpperCase();
  }
  return tr({}, td({}, b + ":"), td({
    id: a
  }));
};

newGame = () => {
  return init();
};

analyze = () => {
  return window.location.href = "https://lichess.org/analysis/pgn/" + game.pgn().replaceAll(" ", "%20");
};

r4r(() => {
  return table({}, tr({}, td({}, div({
    id: "board",
    style: "width:500px"
  }), button({
    onclick: newGame
  }, "New Game"), button({
    onclick: analyze
  }, "Analyze"))), tr({}, f("PGN"), f("status"), f("bestmove"), f("score")));
});

init();

//$(document).ready init

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXJiYW4uanMiLCJzb3VyY2VSb290IjoiLi4iLCJzb3VyY2VzIjpbImNvZmZlZVxcdXJiYW4uY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDd1c7O0FBQUEsSUFBQSxVQUFBLEVBQUEsUUFBQSxFQUFBLFFBQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSxFQUFBLENBQUEsRUFBQSxJQUFBLEVBQUEsSUFBQSxFQUFBLFdBQUEsRUFBQSxPQUFBLEVBQUEsS0FBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQSxFQUFBLFFBQUEsRUFBQSxTQUFBLEVBQUE7O0FBRXhXLE9BQUE7RUFBUSxHQUFSO0VBQVksR0FBWjtFQUFnQixLQUFoQjtFQUFzQixFQUF0QjtFQUF5QixFQUF6QjtFQUE0QixLQUE1QjtFQUFrQyxJQUFsQztFQUF1QyxHQUF2QztFQUEyQyxFQUEzQztFQUE4QyxJQUE5QztFQUFtRCxNQUFuRDtDQUFBLE1BQUE7O0FBRUEsS0FBQSxHQUFRLENBQUE7O0FBRVIsU0FBQSxHQUFZLENBQUEsQ0FBQSxHQUFBO0FBQ1osTUFBQSxXQUFBLEVBQUE7RUFBQyxXQUFBLEdBQWMsTUFBTSxDQUFDLFFBQVEsQ0FBQztFQUM5QixTQUFBLEdBQVksSUFBSSxlQUFKLENBQW9CLFdBQXBCO0VBQ1osS0FBSyxDQUFDLEdBQU4sR0FBWSxTQUFTLENBQUMsR0FBVixDQUFjLEtBQWQ7RUFDWixJQUFHLENBQUMsS0FBSyxDQUFDLEdBQVY7SUFBbUIsS0FBSyxDQUFDLEdBQU4sR0FBWSwyREFBL0I7R0FIRDs7U0FLQztBQU5XOztBQVFaLE9BQU8sQ0FBQyxHQUFSLENBQVksU0FBQSxDQUFBLENBQVo7O0FBRUEsVUFBQSxHQUFhOztBQUNiLFFBQUEsR0FBVzs7QUFDWCxRQUFBLEdBQVM7O0FBRVQsU0FBQSxHQUFZOztBQUNaLE9BQUEsR0FBVTs7QUFDVixNQUFBLEdBQVM7O0FBQ1QsS0FBQSxHQUFROztBQUNSLFFBQUEsR0FBVzs7QUFDWCxJQUFBLEdBQU87O0FBRVAs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R0FBTCxDQUFBLENBQVUsQ0FBQyxVQUFYLENBQXNCLEdBQXRCLEVBQTBCLEtBQTFCO0FBRHBEOztBQUdWLEdBQUEsQ0FBSSxDQUFBLENBQUEsR0FBQTtTQUNILEtBQUEsQ0FBTSxDQUFBLENBQU4sRUFDQyxFQUFBLENBQUcsQ0FBQSxDQUFILEVBQ0MsRUFBQSxDQUFHLENBQUEsQ0FBSCxFQUNDLEdBQUEsQ0FBSTtJQUFDLEVBQUEsRUFBRyxPQUFKO0lBQWEsS0FBQSxFQUFNO0VBQW5CLENBQUosQ0FERCxFQUVDLE1BQUEsQ0FBTztJQUFDLE9BQUEsRUFBUTtFQUFULENBQVAsRUFBMEIsVUFBMUIsQ0FGRCxFQUdDLE1BQUEsQ0FBTztJQUFDLE9BQUEsRUFBUTtFQUFULENBQVAsRUFBMEIsU0FBMUIsQ0FIRCxDQURELENBREQsRUFNQyxFQUFBLENBQUcsQ0FBQSxDQUFILEVBQ0MsQ0FBQSxDQUFFLEtBQUYsQ0FERCxFQUVDLENBQUEsQ0FBRSxRQUFGLENBRkQsRUFHQyxDQUFBLENBQUUsVUFBRixDQUhELEVBSUMsQ0FBQSxDQUFFLE9BQUYsQ0FKRCxDQU5EO0FBREcsQ0FBSjs7QUFhQSxJQUFBLENBQUE7O0FBOU13VyIsInNvdXJjZXNDb250ZW50IjpbIiMgdG9kb1xyXG4jIHVybDogaHR0cHM6Ly9saWNoZXNzLm9yZy9hbmFseXNpcy9wZ24vMS4lMjBjMyUyMGU1JTIwMi4lMjBmMyUyME5jNiUyMDMuJTIwUWMyJTIwTmY2JTIwNC4lMjBRZDMlMjBkNSUyMDUuJTIwUWUzJTIwQmQ2JTIwNi4lMjBRZjIlMjBlNCUyMDcuJTIwS2QxJTIwTy1PJTIwOC4lMjBRZTElMjBSZTglMjA5LiUyMGZ4ZTQlMjBkeGU0JTIwMTAuJTIwZDMlMjBleGQzJTIwMTEuJTIwZXhkMyUyMFJ4ZTErJTIwMTIuJTIwS3hlMSUyME5nNCUyMDEzLiUyME5mMyUyMEJmNSUyMDE0LiUyMGgzJTIwQmczKyUyMDE1LiUyMEtkMiUyME5mMiUyMDE2LiUyMFJnMSUyMEJ4ZDMlMjAxNy4lMjBCeGQzJTIwUXhkMyslMjAxOC4lMjBLZTElMjBRZDEjMzZcclxuXHJcbmltcG9ydCB7bG9nLHI0cix0YWJsZSx0cix0ZCxpbnB1dCxmb3JtLGRpdixicixzcGFuLGJ1dHRvbn0gZnJvbSAnLi4vanMvdXRpbHMuanMnXHJcblxyXG5xdWVyeSA9IHt9XHJcblxyXG5jb25maWd1cmUgPSA9PlxyXG5cdHF1ZXJ5U3RyaW5nID0gd2luZG93LmxvY2F0aW9uLnNlYXJjaFxyXG5cdHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMgcXVlcnlTdHJpbmdcclxuXHRxdWVyeS5mZW4gPSB1cmxQYXJhbXMuZ2V0IFwiZmVuXCJcclxuXHRpZiAhcXVlcnkuZmVuIHRoZW4gcXVlcnkuZmVuID0gXCJybmJxa2Juci9wcHBwcHBwcC84LzgvOC84L1BQUFBQUFBQL1JOQlFLQk5SIHcgS1FrcSAtIDAgMVwiXHJcblx0IyBxdWVyeS5mZW4gPSBcIjgvOC84LzRrMy8zUjQvMks1LzgvOCB3IC0gLSAwIDFcIlxyXG5cdHF1ZXJ5XHJcblxyXG5jb25zb2xlLmxvZyBjb25maWd1cmUoKVxyXG5cclxuQk9LU1RBVkVSQSA9IHRydWVcclxuU1RSRU5HVEggPSAxMFxyXG5SRUFEQk9USD10cnVlXHJcblxyXG5zdG9ja2Zpc2ggPSBudWxsXHJcbnNwZWFrZXIgPSBudWxsXHJcbnZvaWNlcyA9IG51bGxcclxucXVldWUgPSBbXVxyXG5zcGVha2luZyA9IDBcclxuZ2FtZSA9IG51bGxcclxuXHJcbndpbmRvdy5zcGVlY2hTeW50aGVzaXMub252b2ljZXNjaGFuZ2VkID0gLT4gdm9pY2VzID0gd2luZG93LnNwZWVjaFN5bnRoZXNpcy5nZXRWb2ljZXMoKVxyXG5cclxuaW5pdFNwZWFrZXIgPSAtPlxyXG5cdGluZGV4ID0gNVxyXG5cdHNwZWFrZXIgPSBuZXcgU3BlZWNoU3ludGhlc2lzVXR0ZXJhbmNlKClcclxuXHRzcGVha2VyLm9uZW5kID0gKGV2ZW50KSA9PiBcclxuXHRcdHNwZWFraW5nLS1cclxuXHRcdGlmIHF1ZXVlLmxlbmd0aCA+IDAgdGhlbiBzYXkoKVxyXG5cdHNwZWFrZXIudm9pY2VVUkkgPSBcIm5hdGl2ZVwiXHJcblx0c3BlYWtlci52b2x1bWUgPSAxXHJcblx0c3BlYWtlci5yYXRlID0gMS4wXHJcblx0c3BlYWtlci5waXRjaCA9IDBcclxuXHRzcGVha2VyLnRleHQgPSAnJyBcclxuXHRzcGVha2VyLmxhbmcgPSAnc3YnXHJcblx0aWYgdm9pY2VzIGFuZCBpbmRleCA8PSB2b2ljZXMubGVuZ3RoLTEgdGhlbiBzcGVha2VyLnZvaWNlID0gdm9pY2VzW2luZGV4XVxyXG5cclxuc2F5ID0gKG09XCJcIikgLT5cclxuXHRpZiBzcGVha2VyID09IG51bGwgdGhlbiByZXR1cm5cclxuXHRpZiBtICE9IFwiXCIgdGhlbiBxdWV1ZS5wdXNoIG1cclxuXHRpZiBzcGVha2luZyA9PSAwXHJcblx0XHRzcGVha2luZysrXHJcblx0XHRzcGVha2VyLnRleHQgPSBxdWV1ZS5zaGlmdCgpXHJcblx0XHRzcGVlY2hTeW50aGVzaXMuc3BlYWsgc3BlYWtlclxyXG5cclxuaW5pdFNwZWFrZXIoKVxyXG5cclxuaW5pdCA9ID0+XHJcblx0c3RvY2tmaXNoID0gbmV3IFdvcmtlciAnc3RvY2tmaXNoLmpzJ1xyXG5cdGJvYXJkID0gbnVsbFxyXG5cdGdhbWUgPSBuZXcgQ2hlc3MgcXVlcnkuZmVuXHJcblx0IyBsb2cgZ2FtZVxyXG5cdCMgc3RvY2tmaXNoLnBvc3RNZXNzYWdlIFwicG9zaXRpb24gZmVuIFwiICsgcXVlcnkuZmVuXHJcblxyXG5cdCMgZG8gbm90IHBpY2sgdXAgcGllY2VzIGlmIHRoZSBnYW1lIGlzIG92ZXJcclxuXHQjIG9ubHkgcGljayB1cCBwaWVjZXMgZm9yIFdoaXRlXHJcblx0b25EcmFnU3RhcnQgPSAoc291cmNlLCBwaWVjZSwgcG9zaXRpb24sIG9yaWVudGF0aW9uKSA9PlxyXG5cdFx0aWYgZ2FtZS5pbl9jaGVja21hdGUoKSB8fCBnYW1lLmluX2RyYXcoKSB8fCBwaWVjZS5zZWFyY2goL15iLykgIT0gLTFcclxuXHRcdFx0cmV0dXJuIGZhbHNlXHJcblxyXG5cdG1ha2VNb3ZlID0gPT5cclxuXHRcdHBvc3NpYmxlTW92ZXMgPSBnYW1lLm1vdmVzKClcclxuXHJcblx0XHQjIGdhbWUgb3ZlclxyXG5cdFx0aWYgcG9zc2libGVNb3Zlcy5sZW5ndGggPT0gMCB0aGVuIHJldHVyblxyXG5cclxuXHRcdEZFTiA9IGdhbWUuZmVuKClcclxuXHJcblx0XHRzdG9ja2Zpc2gucG9zdE1lc3NhZ2UgXCJwb3NpdGlvbiBmZW4gXCIgKyBGRU5cclxuXHRcdCNzdG9ja2Zpc2gucG9zdE1lc3NhZ2UgJ2dvIGRlcHRoICcgKyBTVFJFTkdUSFxyXG5cdFx0c3RvY2tmaXNoLnBvc3RNZXNzYWdlICdnbyBtb3ZldGltZSAxMDAwJyAjIG1zXHJcblxyXG5cdFx0c3RvY2tmaXNoLm9ubWVzc2FnZSA9IChldmVudCkgPT5cclxuXHRcdFx0Y29uc29sZS5sb2cgZXZlbnQuZGF0YVxyXG5cdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJlc3Rtb3ZlXCIpLmlubmVySFRNTCA9IGV2ZW50LmRhdGFcclxuXHRcdFx0c3RyID0gZXZlbnQuZGF0YVxyXG5cdFx0XHRtZXNzYWdlID0gc3RyLnNwbGl0IFwiIFwiXHJcblx0XHRcdGlmIG1lc3NhZ2UuaW5jbHVkZXMgXCJzY29yZVwiXHJcblx0XHRcdFx0aWYgbWVzc2FnZVs4XT09J2NwJyB0aGVuIHNjb3JlID0gLW1lc3NhZ2VbOV0vMTAwXHJcblx0XHRcdFx0aWYgbWVzc2FnZVs4XT09J21hdGUnIHRoZW4gc2NvcmUgPSAnIycrbWVzc2FnZVs5XVxyXG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NvcmVcIikuaW5uZXJIVE1MID0gc2NvcmVcclxuXHRcdFx0XHJcblx0XHRcdCMgcmVzID0gc3RyLnNwbGl0IFwiIFwiXHJcblx0XHRcdGlmIG1lc3NhZ2VbMF0gPT0gXCJiZXN0bW92ZVwiXHJcblx0XHRcdFx0enVnID0gbWVzc2FnZVsxXS5zcGxpdCBcIlwiXHJcblx0XHRcdFx0Ym90bW92ZXNvdXJjZSA9IHp1Z1swXSt6dWdbMV1cclxuXHRcdFx0XHRib3Rtb3ZldGFyZ2V0ID0genVnWzJdK3p1Z1szXVxyXG5cdFx0XHRcdCMgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJib3Rtb3ZlXCIpLmlubmVySFRNTCA9IGJvdG1vdmVzb3VyY2U7XHJcblx0XHRcdFx0c291cmNlID0gYm90bW92ZXNvdXJjZVxyXG5cdFx0XHRcdHRhcmdldCA9IGJvdG1vdmV0YXJnZXRcclxuXHRcdFx0XHRtb3ZlID0gZ2FtZS5tb3ZlIHtmcm9tOiBzb3VyY2UsIHRvOiB0YXJnZXQscHJvbW90aW9uOiAncSd9XHJcblxyXG5cdFx0XHRcdHNheSBsYXN0TW92ZSgpXHJcblx0XHRcdFx0XHJcblx0XHRcdFx0Ym9hcmQucG9zaXRpb24gZ2FtZS5mZW4oKVxyXG5cdFx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiUEdOXCIpLmlubmVySFRNTCA9IGdhbWUucGduKClcclxuXHRcdFx0XHR1cGRhdGVTdGF0dXMoKVxyXG5cdFx0XHRcdCNzb3VuZCgpXHJcblxyXG5cdHBhdGNoID0gKG1vdmUsIG9iaikgLT5cclxuXHRcdGZvciBrZXksIHZhbHVlIG9mIG9ialxyXG5cdFx0XHRtb3ZlID0gbW92ZS5yZXBsYWNlIGtleSwgdmFsdWVcclxuXHRcdG1vdmVcclxuXHJcblx0bGFzdE1vdmUgPSA9PlxyXG5cdFx0bW92ZXMgPSBnYW1lLmhpc3RvcnkoKVxyXG5cdFx0aWYgbW92ZXMubGVuZ3RoID09IDAgdGhlbiByZXR1cm4gJydcclxuXHRcdG1vdmUgPSBtb3Zlc1ttb3Zlcy5sZW5ndGgtMV1cclxuXHRcdG9sZG1vdmUgPSBtb3ZlXHJcblxyXG5cdFx0bW92ZSA9IHBhdGNoIG1vdmUsIHthOiBcIiFcIixiOiBcIkBcIixjOiBcIl9cIixkOiBcIiRcIixlOiBcIiVcIixmOiBcIl5cIixnOiBcIiZcIixoOiBcIipcIn1cclxuXHRcdG1vdmUgPSBwYXRjaCBtb3ZlLCB7XCIhXCI6XCJhZGFtIFwiLFwiQFwiOlwiYmVydGlsIFwiLFwiX1wiOlwic2VlaHNhciBcIixcIiRcIjpcImRhdmlkIFwiLFwiJVwiOlwiZXJpayBcIixcIl5cIjpcImZpbGlwIFwiLFwiJlwiOlwiZ3VzdGF2IFwiLFwiKlwiOlwiaGVsZ2UgXCJ9XHJcblx0XHRtb3ZlID0gcGF0Y2ggbW92ZSwge3g6IFwiIHNsw6VyIFwiLE46IFwic3ByaW5nYXJlIFwiLEI6IFwibMO2cGFyZSBcIixSOiBcInRvcm4gXCIsUTogXCJkYW0gXCIsSzogXCJrdW5nIFwiLFwiK1wiOiBcIiwgc2NoYWNrXCIsXCIjXCI6IFwiLCBzY2hhY2sgbWF0dFwiLCdPLU8tTyc6ICdrdW5nIGzDpW5nJywnTy1PJzogJ2t1bmcga29ydCd9XHJcblxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiYVwiLCBcIiFcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiYlwiLCBcIkBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiY1wiLCBcIl9cIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiZFwiLCBcIiRcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiZVwiLCBcIiVcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiZlwiLCBcIl5cIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiZ1wiLCBcIiZcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiaFwiLCBcIipcIlxyXG5cclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIiFcIixcImFkYW0gXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIkBcIixcImJlcnRpbCBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiX1wiLFwic2VlaHNhciBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlQWxsIFwiJFwiLFwiZGF2aWQgXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIiVcIixcImVyaWsgXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIl5cIixcImZpbGlwIFwiXHJcblx0XHQjIG1vdmUgPSBtb3ZlLnJlcGxhY2VBbGwgXCImXCIsXCJndXN0YXYgXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZUFsbCBcIipcIixcImhlbGdlIFwiXHJcblxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlIFwieFwiLCBcIiBzbMOlciBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlIFwiTlwiLCBcInNwcmluZ2FyZSBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlIFwiQlwiLCBcImzDtnBhcmUgXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZSBcIlJcIiwgXCJ0b3JuIFwiXHJcblx0XHQjIG1vdmUgPSBtb3ZlLnJlcGxhY2UgXCJRXCIsIFwiZGFtIFwiXHJcblx0XHQjIG1vdmUgPSBtb3ZlLnJlcGxhY2UgXCJLXCIsIFwia3VuZyBcIlxyXG5cdFx0IyBtb3ZlID0gbW92ZS5yZXBsYWNlIFwiK1wiLCBcIiwgc2NoYWNrXCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZSBcIiNcIiwgXCIsIHNjaGFjayBtYXR0XCJcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZSAnTy1PLU8nLCAna3VuZyBsw6VuZydcclxuXHRcdCMgbW92ZSA9IG1vdmUucmVwbGFjZSAnTy1PJywgJ2t1bmcga29ydCdcclxuXHRcdGNvbnNvbGUubG9nIG9sZG1vdmUsJy0+Jyxtb3ZlXHJcblx0XHRtb3ZlXHJcblxyXG5cdG9uRHJvcCA9IChzb3VyY2UsIHRhcmdldCkgPT5cclxuXHRcdG1vdmUgPSBnYW1lLm1vdmUgeyBmcm9tOnNvdXJjZSwgdG86dGFyZ2V0LCBwcm9tb3Rpb246J3EnIH1cclxuXHRcdGlmIG1vdmUgPT0gbnVsbCB0aGVuIHJldHVybiAnc25hcGJhY2snXHJcblx0XHRpZiBSRUFEQk9USCB0aGVuIHNheSBsYXN0TW92ZSgpXHJcblx0XHR3aW5kb3cuc2V0VGltZW91dCBtYWtlTW92ZSwgMTUwXHJcblxyXG5cdCMgdXBkYXRlIHRoZSBib2FyZCBwb3NpdGlvbiBhZnRlciB0aGUgcGllY2Ugc25hcFxyXG5cdCMgZm9yIGNhc3RsaW5nLCBlbiBwYXNzYW50LCBwYXduIHByb21vdGlvblxyXG5cdG9uU25hcEVuZCA9ID0+XHJcblx0XHRib2FyZC5wb3NpdGlvbiBnYW1lLmZlbigpXHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlBHTlwiKS5pbm5lckhUTUwgPSBnYW1lLnBnbigpXHJcblx0XHR1cGRhdGVTdGF0dXMoKVxyXG5cdFx0I3NvdW5kKClcclxuXHJcblx0dXBkYXRlU3RhdHVzID0gPT5cclxuXHRcdHN0YXR1cyA9ICcnXHJcblx0XHRtb3ZlQ29sb3IgPSBpZiBnYW1lLnR1cm4oKSA9PSAnYicgdGhlbiAnQmxhY2snIGVsc2UgJ1doaXRlJ1xyXG5cdFx0aWYgZ2FtZS5pbl9jaGVja21hdGUoKSB0aGVuIHN0YXR1cyA9ICdHYW1lIG92ZXIsICcgKyBtb3ZlQ29sb3IgKyAnIGlzIGluIGNoZWNrbWF0ZS4nXHJcblx0XHRlbHNlIGlmIGdhbWUuaW5fZHJhdygpIHRoZW4gc3RhdHVzID0gJ0dhbWUgb3ZlciwgZHJhd24gcG9zaXRpb24nXHJcblx0XHRlbHNlIFxyXG5cdFx0XHRzdGF0dXMgPSBtb3ZlQ29sb3IgKyAnIHRvIG1vdmUnXHJcblx0XHRcdGlmIGdhbWUuaW5fY2hlY2soKSB0aGVuIHN0YXR1cyArPSAnLCAnICsgbW92ZUNvbG9yICsgJyBpcyBpbiBjaGVjaydcclxuXHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3RhdHVzXCIpLmlubmVySFRNTCA9IHN0YXR1c1xyXG5cclxuXHRjZmcgPSB7ZHJhZ2dhYmxlOnRydWUsIHBvc2l0aW9uOnF1ZXJ5LmZlbiwgb25EcmFnU3RhcnQsb25Ecm9wLG9uU25hcEVuZH1cclxuXHRjb25zb2xlLmxvZyBnYW1lLmZlbigpXHJcblx0Ym9hcmQgPSBDaGVzc0JvYXJkICdib2FyZCcsIGNmZ1xyXG5cclxuIyBzb3VuZCA9ID0+XHJcbiMgXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc291bmQnKS5pbm5lckhUTUwgPSAnPGF1ZGlvIGF1dG9wbGF5IHByZWxvYWQgY29udHJvbHM+IDxzb3VyY2Ugc3JjPVwic291bmQvbW92ZS53YXZcIiB0eXBlPVwiYXVkaW8vd2F2XCIgLz4gPC9hdWRpbz4nXHJcblxyXG5mID0gKGEsYj1cIlwiKSA9PlxyXG5cdGlmIGI9PVwiXCIgdGhlbiBiID0gYS50b1VwcGVyQ2FzZSgpXHJcblx0dHIge30sXHJcblx0XHR0ZCB7fSxiK1wiOlwiXHJcblx0XHR0ZCB7aWQ6YX1cclxuXHJcbm5ld0dhbWUgPSA9PiBpbml0KClcclxuXHJcbmFuYWx5emUgPSA9PlxyXG5cdHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJodHRwczovL2xpY2hlc3Mub3JnL2FuYWx5c2lzL3Bnbi9cIiArIGdhbWUucGduKCkucmVwbGFjZUFsbCBcIiBcIixcIiUyMFwiXHJcblxyXG5yNHIgPT5cclxuXHR0YWJsZSB7fSxcclxuXHRcdHRyIHt9LFxyXG5cdFx0XHR0ZCB7fSxcclxuXHRcdFx0XHRkaXYge2lkOlwiYm9hcmRcIiwgc3R5bGU6XCJ3aWR0aDo1MDBweFwifVxyXG5cdFx0XHRcdGJ1dHRvbiB7b25jbGljazpuZXdHYW1lfSwgXCJOZXcgR2FtZVwiXHJcblx0XHRcdFx0YnV0dG9uIHtvbmNsaWNrOmFuYWx5emV9LCBcIkFuYWx5emVcIlxyXG5cdFx0dHIge30sXHJcblx0XHRcdGYgXCJQR05cIlxyXG5cdFx0XHRmIFwic3RhdHVzXCJcclxuXHRcdFx0ZiBcImJlc3Rtb3ZlXCJcclxuXHRcdFx0ZiBcInNjb3JlXCJcclxuXHJcbmluaXQoKVxyXG4jJChkb2N1bWVudCkucmVhZHkgaW5pdFxyXG4iXX0=
//# sourceURL=c:\github\Interface-for-stockfishjs\coffee\urban.coffee